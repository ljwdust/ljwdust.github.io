<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0029)http://www.snh48.com/buy.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<script type="text/javascript" src="./jquery-1.4.2.min.js"></script>
<title>公演日历排期</title>

<script>onerror=handleErr;function handleErr(msg,url,l) { return true }</script><script language="JavaScript">

 var months = new Array("一", "二", "三","四", "五", "六", "七", "八", "九","十", "十一", "十二");

 var daysInMonth = new Array(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);

 var days = new Array("日","一", "二", "三","四", "五", "六");

 var classTemp;

 var today=new getToday();

 var year=today.year;

 var month=today.month;

 var sj=new Array()
 $.get("ticketsinfo.php?act=info",function(data){
  
   eval("var rs="+data);
   $.each(rs, function(key, result){
   sj[result.date]="";
   var info=result.info;
   
   if(info.length>1){
   $.each(info, function(key, dt){
   sj[result.date]+="<span class='word_1'><span class='red'>"+dt.title+"</span><br /><strong>公演日期：</strong>"+dt.addtime+"<br />";
   })
   }else{
   sj[result.date]+="<span class='word_1'><span class='red'>"+info.title+"</span><br /><strong>公演日期：</strong>"+info.addtime+"<br />";
   }
   
   
   })
 
 })
	
 var newCal; 

 function getDays(month, year) {

  if (1 == month) return ((0 == year % 4) && (0 != (year % 100))) ||(0 == year % 400) ? 29 : 28;

  else return daysInMonth[month];

 }

 function getToday() {

  this.now = new Date();

  this.year = this.now.getFullYear();

  this.month = this.now.getMonth();

  this.day = this.now.getDate();

 }

 function Calendar() {

  newCal = new Date(year,month,1);

  today = new getToday();   

  var day = -1;

  var startDay = newCal.getDay();

  var endDay=getDays(newCal.getMonth(), newCal.getFullYear());

  var daily = 0;

  if ((today.year == newCal.getFullYear()) &&(today.month == newCal.getMonth()))

  {

   day = today.day;

  }

  var caltable = document.all.caltable.tBodies.calendar;

  var intDaysInMonth =getDays(newCal.getMonth(), newCal.getFullYear());

  for (var intWeek = 0; intWeek < caltable.rows.length;intWeek++)

   for (var intDay = 0;intDay < caltable.rows[intWeek].cells.length;intDay++)

   {

    var cell = caltable.rows[intWeek].cells[intDay];

    var montemp=(newCal.getMonth()+1)<10?("0"+(newCal.getMonth()+1)):(newCal.getMonth()+1); 
    if ((intDay == startDay) && (0 == daily)){ daily = 1;}

    var daytemp=daily<10?("0"+daily):(daily);

    var d="<"+newCal.getFullYear()+"-"+montemp+"-"+daytemp+">";

    if(day==daily) cell.className="DayNow";

    else if(intDay==6) cell.className = "DaySat";

    else if (intDay==0) cell.className ="DaySun";

    else cell.className="Day";

    if ((daily > 0) && (daily <= intDaysInMonth))

    {

     cell.innerText = daily;

     daily++;

    } else

    {

     cell.className="CalendarTD";

     cell.innerText = "";

    }

  }

  document.all.year.value=year;

  document.all.month.value=month+1;

 }

 function subMonth()

 {

  if ((month-1)<0)

  {

   month=11;

   year=year-1;

  } else

  {

   month=month-1;

  }

  Calendar();

 }

 function addMonth()

 {

  if((month+1)>11)

  {

   month=0;

   year=year+1;

  } else

  {

   month=month+1;

  }

  Calendar();

 }

 function setDate() 

 {

  if (document.all.month.value<1||document.all.month.value>12)

  {

   alert("月的有效范围在1-12之间!");

   return;

  }

  year=Math.ceil(document.all.year.value);

  month=Math.ceil(document.all.month.value-1);

  Calendar();

 }

</script><script>

function buttonOver()

{

 var obj = window.event.srcElement;

 obj.runtimeStyle.cssText = "background-color:#fefcf0";

// obj.className="Hover";

}

function buttonOut()

{

 var obj = window.event.srcElement;

 window.setTimeout(function(){obj.runtimeStyle.cssText = "";},300);

}

function showSJ(i){

	var year = document.getElementById("year").value;

	var month = document.getElementById("month").value;
       if(month<10 && month >=1) month='0'+month;
	var day =  i.innerHTML; 
       if(day<10 && day>=1) day='0'+day;
	var showID = "" + year + month + day;
      
	if ( typeof sj[showID] != "undefined" )

		document.getElementById("m").innerHTML = sj[showID];
	else
		document.getElementById("m").innerHTML = "<br /><span class='word_1'>当日暂无演出信息，请关注其他日期！</span>";

}

</script><style>

body{
	margin:0px;
	font-size:12px;
	font-family:"微软雅黑";
	background-color:#f9f9f9;
}

Input {font-family: verdana;font-size: 14px;text-decoration: none;background-color: #fcfbf9;height: 20px;border: 1px solid #fcfbf9;color:#6d6d75; line-height:20px; text-align:center;}

.Calendar {font-family: verdana;text-decoration: none;width: 170;background-color: #f7f3f0;font-size: 9pt;border:0px dotted #1C6FA5;}

.CalendarTD {font-family: verdana;font-size: 12px;color: #6d6d75;background-color:#fff;height: 24px;width:11%;text-align: center;}

.Title {font-family: verdana;font-size: 11pt;font-weight: normal;height: 24px;text-align: center;color: #333333;text-decoration: none;background-color: #fcfbf9;border-top-width: 1px;border-right-width: 1px;border-bottom-width: 1px;border-left-width: 1px;border-bottom-style:1px;border-top-color: #999999;border-right-color: #999999;border-bottom-color: #999999;border-left-color: #999999;}

.Day {font-family: verdana;font-size: 12px;color:#243F65;background-color: #fff;height: 24px;width:11%;text-align: center;}

.DaySat {font-family: verdana;font-size: 12px;color:#ba4d22;text-decoration: none;background-color:#fff;text-align: center;height: 24px;width: 12%;}

.DaySun {font-family: verdana;font-size: 12px;;color: #ba4d22;text-decoration: none;background-color:#fff;text-align: center;height: 24px;width: 12%;}

.DayNow {font-family: verdana;font-size: 12px;font-weight: bold;color: #000000;background-color: #fefcf0;height: 20px;text-align: center; border:1px solid #d4b15f}

.DayTitle {font-family: "微软雅黑";font-size: 14px;color: #666;background-color: #fcfbf9;height: 24px;width:11%;text-align: center;}

.DaySatTitle {font-family: "微软雅黑";font-size: 14px;color:#bf5227;text-decoration: none;background-color:#fcfbf9;text-align: center;height: 24px;width: 12%;}

.DaySunTitle {font-family: "微软雅黑";font-size: 14px;color: #bf5227;text-decoration: none;background-color: #fcfbf9;text-align: center;height: 24px;width: 12%;}

.DayButton {font-family: Webdings;font-size: 14px;font-weight: bold;color: #c68b3b;cursor:hand;text-decoration: none;}

.word_1 {
	font-size:14px;
	line-height:20px;
	color:#666;
}

.red { color:#F00;}

</style></head>










<body><div style="height:5px; background-color:#FFF"></div>
<table width="226" border="0" cellpadding="0" cellspacing="1" class="Calendar" id="caltable">

<thead>

     <tr align="center" valign="middle"> 

  <td colspan="7" class="Title">

   <a href="javaScript:subMonth();" title="上一月" class="DayButton">3</a> <input name="year" id="year" type="text" size="4" maxlength="4" onkeydown="if (event.keyCode==13){setDate()}" onkeyup="this.value=this.value.replace(/[^0-9]/g,&#39;&#39;)" onpaste="this.value=this.value.replace(/[^0-9]/g,&#39;&#39;)"> 年 <input name="month" id="month" type="text" size="1" maxlength="2" onkeydown="if (event.keyCode==13){setDate()}" onkeyup="this.value=this.value.replace(/[^0-9]/g,&#39;&#39;)" onpaste="this.value=this.value.replace(/[^0-9]/g,&#39;&#39;)"> 月 <a href="JavaScript:addMonth();" title="下一月" class="DayButton">4</a>

  </td>

 </tr>

 <tr align="center" valign="middle"> 

  <script language="JavaScript">  

   document.write("<TD class=DaySunTitle id=diary >" + days[0] + "</TD>"); 

   for (var intLoop = 1; intLoop < days.length-1;intLoop++) 

    document.write("<TD class=DayTitle id=diary>" + days[intLoop] + "</TD>"); 

    document.write("<TD class=DaySatTitle id=diary>" + days[intLoop] + "</TD>"); 

  </script><td class="DaySunTitle" id="diary">日</td><td class="DayTitle" id="diary">一</td><td class="DayTitle" id="diary">二</td><td class="DayTitle" id="diary">三</td><td class="DayTitle" id="diary">四</td><td class="DayTitle" id="diary">五</td><td class="DaySatTitle" id="diary">六</td>

 </tr> 

</thead>

<tbody border="1" cellspacing="0" cellpadding="0" id="calendar" align="CENTER" onclick="getDiary()">

 <script language="JavaScript">

  for (var intWeeks = 0; intWeeks < 6; intWeeks++)

  {

   document.write("<TR style='cursor:hand'>");

   for (var intDays = 0; intDays < days.length;intDays++) document.write("<TD class=CalendarTD onMouseover='buttonOver();showSJ(this);' onMouseOut='buttonOut();'></TD>");

   document.write("</TR>");

  } 

 </script><tr style="cursor:hand"><td class="CalendarTD" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();"></td><td class="CalendarTD" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();"></td><td class="CalendarTD" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();"></td><td class="CalendarTD" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();"></td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">1</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">2</td><td class="DaySat" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">3</td></tr><tr style="cursor:hand"><td class="DaySun" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">4</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">5</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">6</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">7</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">8</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">9</td><td class="DaySat" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">10</td></tr><tr style="cursor:hand"><td class="DaySun" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">11</td><td class="DayNow" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">12</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">13</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">14</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">15</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">16</td><td class="DaySat" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">17</td></tr><tr style="cursor:hand"><td class="DaySun" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">18</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">19</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">20</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">21</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">22</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">23</td><td class="DaySat" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">24</td></tr><tr style="cursor:hand"><td class="DaySun" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">25</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">26</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">27</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">28</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">29</td><td class="Day" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();">30</td><td class="CalendarTD" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();"></td></tr><tr style="cursor:hand"><td class="CalendarTD" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();"></td><td class="CalendarTD" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();"></td><td class="CalendarTD" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();"></td><td class="CalendarTD" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();"></td><td class="CalendarTD" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();"></td><td class="CalendarTD" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();"></td><td class="CalendarTD" onmouseover="buttonOver();showSJ(this);" onmouseout="buttonOut();"></td></tr>

</tbody>

</table>

 <div id="m" style="float:left; margin-left:10px;"><br>
 <span class="word_1">请鼠标指向具体日历日期查看当天演出排期安排。</span></div>

<script language="JavaScript">

 Calendar();

</script>

</body></html>